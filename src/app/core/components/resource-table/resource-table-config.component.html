<h3 mat-dialog-title>{{ 'key_resourceTableConfig' | translate }}</h3>
<div mat-dialog-content fxLayout="column" style="height: 800px; width: 800px;">
  <mat-tab-group fxFlex="0 1 350px">
    <mat-tab [label]="'key_general' | translate">
      <div fxFlex fxLayout="column" fxLayoutGap="10px" style="padding-top: 20px;">
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <mat-form-field fxFlex="auto">
            <input
              matInput
              [placeholder]="'key_title' | translate"
              [(ngModel)]="data.objectConfig.title"
            />
          </mat-form-field>
          <mat-form-field fxFlex="auto">
            <input
              matInput
              type="number"
              min="10"
              max="20"
              [placeholder]="'key_fontSize' | translate"
              [(ngModel)]="data.objectConfig.fontSize"
            />
          </mat-form-field>
          <mat-form-field fxFlex="auto">
            <input
              matInput
              type="number"
              min="0"
              max="20"
              [placeholder]="'key_padding' | translate"
              [(ngModel)]="data.objectConfig.cellPadding"
            />
          </mat-form-field>
        </div>
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <mat-form-field fxFlex="1 1 auto">
            <input
              matInput
              [placeholder]="'key_query' | translate"
              [(ngModel)]="data.objectConfig.query"
            />
          </mat-form-field>
          <div fxFlex="0 0 auto" style="padding-top: 10px;">
            <button
              mat-button
              color="primary"
              (click)="onApplyQuery()"
              style="height: 38px; width: 120px;"
            >
              <mat-icon style="margin-right: 10px;">assignment_turned_in</mat-icon
              >{{ 'key_apply' | translate }}
            </button>
          </div>
        </div>
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <mat-slide-toggle
            fxFlex="auto"
            [(ngModel)]="data.objectConfig.exportToPDF"
            style="width: 120px;"
            >{{ 'key_exportToPDF' | translate }}</mat-slide-toggle
          >
          <mat-slide-toggle
            fxFlex="auto"
            [(ngModel)]="data.objectConfig.exportToExcel"
            style="width: 120px;"
            >{{ 'key_exportToExcel' | translate }}</mat-slide-toggle
          >
          <mat-slide-toggle
            fxFlex="auto"
            [(ngModel)]="data.objectConfig.exportAllPages"
            style="width: 120px;"
            >{{ 'key_exportAllPages' | translate }}</mat-slide-toggle
          >
        </div>
      </div>
    </mat-tab>
    <mat-tab [label]="'key_pagingAndSort' | translate">
      <div fxFlex fxLayout="column" fxLayoutGap="10px" style="padding-top: 20px;">
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <mat-form-field fxFlex="auto">
            <mat-select
              [placeholder]="'key_type' | translate"
              [(ngModel)]="data.objectConfig.pageType"
            >
              <mat-option value="numeric">numeric</mat-option>
              <mat-option value="input">input</mat-option>
            </mat-select>
          </mat-form-field>
          <div fxFlex="auto" style="padding-top: 20px;">
            <mat-slide-toggle [(ngModel)]="data.objectConfig.pageInfo">{{
              'key_showPageInfo' | translate
            }}</mat-slide-toggle>
          </div>
          <div fxFlex="auto" style="padding-top: 20px;">
            <mat-slide-toggle [(ngModel)]="data.objectConfig.pageButton">{{
              'key_showPageButton' | translate
            }}</mat-slide-toggle>
          </div>
        </div>
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <mat-form-field fxFlex="33">
            <input
              matInput
              type="number"
              min="1"
              max="10"
              [placeholder]="'key_maxCounterNumber' | translate"
              [(ngModel)]="data.objectConfig.pageCountNumber"
            />
          </mat-form-field>
          <div fxFlex="66" fxLayout="row" fxLayoutGap="20px">
            <mat-form-field fxFlex="1 1 auto">
              <input
                matInput
                type="number"
                min="1"
                max="100"
                [placeholder]="'key_pageSize' | translate"
                [(ngModel)]="tmpPageSize"
              />
            </mat-form-field>
            <div fxFlex="0 0 auto" style="padding-top: 10px;">
              <button
                mat-button
                color="primary"
                (click)="onApplyPageSize()"
                style="height: 38px; width: 120px;"
              >
                <mat-icon style="margin-right: 10px;">assignment_turned_in</mat-icon
                >{{ 'key_apply' | translate }}
              </button>
            </div>
          </div>
        </div>
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <div fxFlex="33" style="padding-top: 20px;">
            <mat-slide-toggle [(ngModel)]="data.objectConfig.sortable">{{
              'key_sortable' | translate
            }}</mat-slide-toggle>
          </div>
          <mat-form-field fxFlex="33">
            <mat-select
              [disabled]="!data.objectConfig.sortable"
              [placeholder]="'key_sortMode' | translate"
              [(ngModel)]="data.objectConfig.sortMode"
            >
              <mat-option value="single">single</mat-option>
              <mat-option value="multiple">multiple</mat-option>
            </mat-select>
          </mat-form-field>
          <div fxFlex="33" style="padding-top: 20px;">
            <mat-slide-toggle
              [disabled]="!data.objectConfig.sortable"
              [(ngModel)]="data.objectConfig.allowUnsort"
              >{{ 'key_allowUnsort' | translate }}</mat-slide-toggle
            >
          </div>
        </div>
      </div>
    </mat-tab>
    <mat-tab [label]="'key_selectAndResize' | translate">
      <div fxFlex fxLayout="column" fxLayoutGap="10px" style="padding-top: 20px;">
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <div fxFlex="33" style="padding-top: 20px;">
            <mat-slide-toggle [(ngModel)]="data.objectConfig.selectable">{{
              'key_selectable' | translate
            }}</mat-slide-toggle>
          </div>
          <div fxFlex="33" style="padding-top: 20px;">
            <mat-slide-toggle
              [disabled]="!data.objectConfig.selectable"
              [(ngModel)]="data.objectConfig.checkboxSelectOnly"
              >{{ 'key_checkboxSelectionOnly' | translate }}</mat-slide-toggle
            >
          </div>
          <mat-form-field fxFlex="33">
            <mat-select
              [disabled]="!data.objectConfig.selectable"
              [placeholder]="'key_selectionMode' | translate"
              [(ngModel)]="data.objectConfig.selectMode"
            >
              <mat-option value="single">single</mat-option>
              <mat-option value="multiple">multiple</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div fxFlex="1 1 auto" fxLayout="row" fxLayoutGap="20px">
          <div fxFlex="33" style="padding-top: 20px;">
            <mat-slide-toggle [(ngModel)]="data.objectConfig.resizable">{{
              'key_resizable' | translate
            }}</mat-slide-toggle>
          </div>
          <mat-form-field fxFlex="33">
            <input
              [disabled]="!data.objectConfig.selectable"
              matInput
              type="number"
              min="10"
              max="100"
              [placeholder]="'key_selectBoxWidth' | translate"
              [(ngModel)]="data.objectConfig.selectBoxWidth"
            />
          </mat-form-field>
        </div>
      </div>
    </mat-tab>
    <mat-tab [label]="'key_columns' | translate">
      <ng-template matTabContent>
        <div fxLayout="column" style="height: 100%;">
          <div
            fxFlex="auto"
            dragula="COLUMNS"
            [(dragulaModel)]="data.objectConfig.columns"
            style="overflow-y: auto;"
          >
            <mat-card
              *ngFor="let column of data.objectConfig.columns"
              style="border-left: solid darkseagreen 5px; margin-top: 10px; margin-right: 5px; padding: 12px;"
            >
              <mat-card-header fxLayout="row" fxLayoutAlign="start center">
                <div
                  fxFlex="none"
                  (click)="onToggleColumnDisplay(column)"
                  style="width: 36px; margin-left: -20px; cursor: pointer; color: lightgray;"
                >
                  <mat-icon>menu</mat-icon>
                </div>
                <div fxFlex style="margin-top: -8px;">{{ column.title }}</div>
                <button
                  mat-button
                  color="warn"
                  [disabled]="data.objectConfig.columns.length === 1"
                  matTooltip="{{'key_delete'|translate}}"
                  (click)="onDeleteColumn(column)"
                  style="width: 24px; min-width: 24px; padding: 0; margin: 0; margin-top: -10px;"
                >
                  <mat-icon>delete_forever</mat-icon>
                </button>
              </mat-card-header>
              <mat-card-content
                *ngIf="column.display"
                fxLayout="column"
                style="margin-top: 10px; font-size: 12px;"
              >
                <div fxFlex="auto" fxLayout="row" fxLayoutGap="10px">
                  <mat-form-field fxFlex="auto">
                    <input
                      matInput
                      [placeholder]="'key_title' | translate"
                      [(ngModel)]="column.title"
                    />
                  </mat-form-field>
                  <mat-form-field fxFlex="auto">
                    <input
                      matInput
                      [placeholder]="'key_field' | translate"
                      [(ngModel)]="column.field"
                    />
                  </mat-form-field>
                  <div fxFlex="auto">
                    <mat-slide-toggle [(ngModel)]="column.sortable" class="small-slide">{{
                      'key_sortable' | translate
                    }}</mat-slide-toggle>
                  </div>
                </div>
                <div fxFlex="auto" fxLayout="row" fxLayoutGap="10px">
                  <div fxFlex="auto">
                    <mat-slide-toggle [(ngModel)]="column.filterable" class="small-slide">{{
                      'key_filterable' | translate
                    }}</mat-slide-toggle>
                  </div>
                  <mat-form-field fxFlex="auto">
                    <mat-select
                      [disabled]="!column.filterable"
                      [placeholder]="'key_filterType' | translate"
                      [(ngModel)]="column.filter"
                    >
                      <mat-option value="text">text</mat-option>
                      <mat-option value="numeric">numeric</mat-option>
                      <mat-option value="boolean">boolean</mat-option>
                      <mat-option value="date">date</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <div fxFlex="auto">
                    <mat-slide-toggle [(ngModel)]="column.locked" class="small-slide">{{
                      'key_locked' | translate
                    }}</mat-slide-toggle>
                  </div>
                  <mat-form-field fxFlex="auto">
                    <input
                      matInput
                      type="number"
                      min="0"
                      [placeholder]="'key_columnWidth' | translate"
                      [(ngModel)]="column.width"
                    />
                  </mat-form-field>
                </div>
              </mat-card-content>
            </mat-card>
          </div>
          <div fxFlex></div>
          <div fxFlex="none" fxLayout="row">
            <button fxFlex mat-button color="primary" (click)="onApplyColumns()">
              <mat-icon style="margin-right: 10px; font-size: 16px; height: 18px;"
                >assignment_turned_in</mat-icon
              >{{ 'key_apply' | translate }}
            </button>
            <button fxFlex mat-button (click)="onAddColumn()">
              <mat-icon style="margin-right: 10px; font-size: 16px; height: 18px;"
                >playlist_add</mat-icon
              >{{ 'key_add' | translate }}
            </button>
            <button fxFlex mat-button (click)="onExpendAll()">
              <fa-icon
                [icon]="faExpendAll"
                style="margin-right: 10px; font-size: 12px; height: 18px;"
              ></fa-icon
              >{{ 'key_expendAll' | translate }}
            </button>
            <button fxFlex mat-button (click)="onCollapseAll()">
              <fa-icon
                [icon]="faCollapseAll"
                style="margin-right: 10px; font-size: 14px; height: 18px;"
              ></fa-icon
              >{{ 'key_collapseAll' | translate }}
            </button>
          </div>
        </div>
      </ng-template>
    </mat-tab>
  </mat-tab-group>
  <div fxFlex="0 0 260px" style="margin-top: 20px;">
    <app-resource-table #exampleResourceTable [data]="data.objectConfig"></app-resource-table>
  </div>
</div>
<div
  mat-dialog-actions
  fxLayout="row"
  fxLayoutAlign="start center"
  fxLayoutGap="20px"
  style="margin-top: 20px;"
>
  <button fxFlex="none" mat-button [mat-dialog-close]="data.objectConfig" style="width: 180px;">
    {{ 'key_submit' | translate }}
  </button>
  <button fxFlex="none" mat-button mat-dialog-close="cancel" style="width: 180px;">
    {{ 'key_cancel' | translate }}
  </button>
</div>
